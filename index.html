<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة شبكة الإحالات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="user-info">
                <img id="user-avatar" src="https://ui-avatars.com/api/?name=مستخدم&background=random" alt="صورة المستخدم" width="40" height="40" style="border-radius: 50%;">
                <span id="username">مستخدم</span>
            </div>
            <h1><i class="fas fa-network-wired"></i> نظام إدارة شبكة الإحالات</h1>
            <p>ادارة وتتبع شبكة الإحالات الخاصة بك بشكل كامل</p>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-tab="dashboard">لوحة التحكم</div>
            <div class="tab" data-tab="network">شبكتي</div>
            <div class="tab" data-tab="management">إدارة المجموعة</div>
            <div class="tab" data-tab="reports">تقارير</div>
        </div>
        
        <div class="tab-content active" id="dashboard-tab">
            <h2>لوحة تحكم نظام الإحالة</h2>
            <p>مرحبًا بك في لوحة التحكم الخاصة بك. هنا يمكنك تتبع إحالاتك ومشاركة رابط الدعوة.</p>
            
            <div class="dashboard">
                <div class="stat-card">
                    <i class="fas fa-users fa-2x"></i>
                    <div class="stat-number" id="referrals-count">0</div>
                    <div class="stat-label">إجمالي الإحالات</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-layer-group fa-2x"></i>
                    <div class="stat-number" id="levels-count">0</div>
                    <div class="stat-label">مستويات الشبكة</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-gift fa-2x"></i>
                    <div class="stat-number" id="points-count">0</div>
                    <div class="stat-label">نقاط المكافآت</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-calendar-day fa-2x"></i>
                    <div class="stat-number" id="join-date">-</div>
                    <div class="stat-label">تاريخ الانضمام</div>
                </div>
            </div>
            
            <div class="referral-section">
                <h3><i class="fas fa-share-alt"></i> رابط الإحالة الخاص بك</h3>
                <p>شارك هذا الرابط مع أصدقائك لتحصل على نقاط مكافآت عند انضمامهم.</p>
                
                <div class="referral-link">
                    <input type="text" id="referral-link" readonly>
                    <button class="copy-btn" id="copy-link-btn"><i class="fas fa-copy"></i> نسخ</button>
                </div>
                
                <div class="social-share">
                    <button class="social-btn facebook" id="share-fb"><i class="fab fa-facebook"></i> فيسبوك</button>
                    <button class="social-btn twitter" id="share-twitter"><i class="fab fa-twitter"></i> تويتر</button>
                    <button class="social-btn whatsapp" id="share-whatsapp"><i class="fab fa-whatsapp"></i> واتساب</button>
                </div>
            </div>
            
            <h3><i class="fas fa-list"></i> أحدث الإحالات</h3>
            <table class="referrals-table">
                <thead>
                    <tr>
                        <th>الاسم</th>
                        <th>البريد الإلكتروني</th>
                        <th>المستوى</th>
                        <th>تاريخ الانضمام</th>
                        <th>الحالة</th>
                    </tr>
                </thead>
                <tbody id="recent-referrals">
                    <tr>
                        <td colspan="5" style="text-align: center;">لا توجد إحالات حتى الآن</td>
                    </tr>
                </tbody>
            </table>
            
            <button id="logout-btn" style="margin-top: 30px; background: var(--danger);">تسجيل الخروج</button>
        </div>
        
        <div class="tab-content" id="network-tab">
            <h2><i class="fas fa-network-wired"></i> شبكة الإحالات الخاصة بي</h2>
            <p>هنا يمكنك رؤية شبكة الإحالات الخاصة بك بشكل كامل مع جميع المستويات.</p>
            
            <div class="network-stats">
                <div class="network-stat">
                    <div class="network-stat-number" id="total-members">0</div>
                    <div class="network-stat-label">إجمالي الأعضاء</div>
                </div>
                <div class="network-stat">
                    <div class="network-stat-number" id="direct-referrals">0</div>
                    <div class="network-stat-label">الإحالات المباشرة</div>
                </div>
                <div class="network-stat">
                    <div class="network-stat-number" id="max-level">0</div>
                    <div class="network-stat-label">أعمق مستوى</div>
                </div>
                <div class="network-stat">
                    <div class="network-stat-number" id="active-today">0</div>
                    <div class="network-stat-label">نشط اليوم</div>
                </div>
            </div>
            
            <div class="filters">
                <select class="filter-select" id="level-filter">
                    <option value="">جميع المستويات</option>
                    <option value="0">المستوى 1 (مباشر)</option>
                    <option value="1">المستوى 2</option>
                    <option value="2">المستوى 3</option>
                    <option value="3">المستوى 4+</option>
                </select>
                
                <select class="filter-select" id="status-filter">
                    <option value="">جميع الحالات</option>
                    <option value="active">نشط</option>
                    <option value="inactive">غير نشط</option>
                </select>
                
                <select class="filter-select" id="sort-by">
                    <option value="joinDate">تاريخ الانضمام</option>
                    <option value="name">الاسم</option>
                    <option value="level">المستوى</option>
                </select>
            </div>
            
            <div class="search-box">
                <input type="text" id="network-search" placeholder="ابحث في الشبكة بالاسم أو البريد الإلكتروني">
                <button id="search-btn"><i class="fas fa-search"></i> بحث</button>
            </div>
            
            <div class="network-tree" id="network-tree">
                <div style="text-align: center; padding: 30px;">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p>جاري تحميل شبكة الإحالات...</p>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="management-tab">
            <h2><i class="fas fa-users-cog"></i> إدارة المجموعة</h2>
            <p>من هنا يمكنك إدارة جميع أفراد شبكتك وتتبع أدائهم.</p>
            
            <div class="network-container">
                <div class="network-sidebar">
                    <h3>أدوات الإدارة</h3>
                    
                    <div class="form-group">
                        <label>إرسال رسالة جماعية</label>
                        <textarea id="bulk-message" rows="5" placeholder="اكتب الرسالة التي تريد إرسالها للمجموعة" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd;"></textarea>
                        <button style="margin-top: 10px; width: 100%;">إرسال للجميع</button>
                    </div>
                    
                    <div class="form-group">
                        <label>تصدير بيانات الشبكة</label>
                        <button style="width: 100%; margin-bottom: 10px;"><i class="fas fa-file-excel"></i> تصدير ك Excel</button>
                        <button style="width: 100%;"><i class="fas fa-file-pdf"></i> تصدير ك PDF</button>
                    </div>
                    
                    <div class="form-group">
                        <label>إحصاءات سريعة</label>
                        <div style="background: white; padding: 15px; border-radius: 8px;">
                            <p>أعلى مساهم: <span id="top-contributor">-</span></p>
                            <p>آخر نشاط: <span id="last-activity">-</span></p>
                            <p>معدل النمو: <span id="growth-rate">0%</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="network-main">
                    <h3>أعضاء الشبكة</h3>
                    
                    <div class="filters">
                        <select class="filter-select">
                            <option value="">جميع الأعضاء</option>
                            <option value="direct">الإحالات المباشرة فقط</option>
                            <option value="level">حسب المستوى</option>
                        </select>
                        
                        <input type="text" placeholder="ابحث بالاسم أو البريد">
                        
                        <button><i class="fas fa-filter"></i> تطبيق الفلتر</button>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table class="referrals-table">
                            <thead>
                                <tr>
                                    <th>الاسم</th>
                                    <th>البريد الإلكتروني</th>
                                    <th>المستوى</th>
                                    <th>تاريخ الانضمام</th>
                                    <th>الإحالات</th>
                                    <th>النقاط</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody id="network-members">
                                <tr>
                                    <td colspan="7" style="text-align: center;">جاري تحميل البيانات...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button><i class="fas fa-chevron-right"></i></button>
                        <span style="margin: 0 10px;">الصفحة 1 من 1</span>
                        <button><i class="fas fa-chevron-left"></i></button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="reports-tab">
            <h2><i class="fas fa-chart-line"></i> تقارير وأداء الشبكة</h2>
            <p>تقارير分析ية عن أداء شبكة الإحالات الخاصة بك.</p>
            
            <div class="dashboard">
                <div class="stat-card">
                    <i class="fas fa-chart-pie fa-2x"></i>
                    <div class="stat-number" id="growth-rate-report">15%</div>
                    <div class="stat-label">معدل النمو</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-trophy fa-2x"></i>
                    <div class="stat-number" id="best-level">2</div>
                    <div class="stat-label">أفضل مستوى أداء</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-calendar-week fa-2x"></i>
                    <div class="stat-number" id="weekly-joins">7</div>
                    <div class="stat-label">انضم هذا الأسبوع</div>
                </div>
            </div>
            
            <div style="background: white; border-radius: 10px; padding: 20px; margin-top: 30px;">
                <h3>نمو الشبكة خلال الشهر</h3>
                <div style="height: 300px; background: #f9f9f9; display: flex; align-items: flex-end; justify-content: space-around; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div style="background: var(--primary); width: 40px; height: 120px; border-radius: 5px;"></div>
                        <span style="margin-top: 10px;">الأسبوع 1</span>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div style="background: var(--primary); width: 40px; height: 180px; border-radius: 5px;"></div>
                        <span style="margin-top: 10px;">الأسبوع 2</span>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div style="background: var(--primary); width: 40px; height: 220px; border-radius: 5px;"></div>
                        <span style="margin-top: 10px;">الأسبوع 3</span>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div style="background: var(--primary); width: 40px; height: 250px; border-radius: 5px;"></div>
                        <span style="margin-top: 10px;">الأسبوع 4</span>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                <div style="background: white; border-radius: 10px; padding: 20px;">
                    <h3>توزيع المستويات</h3>
                    <div style="height: 250px; display: flex; align-items: center; justify-content: center;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(
                            #4361ee 0% 40%, 
                            #3a0ca3 40% 65%, 
                            #f72585 65% 80%,
                            #4cc9f0 80% 100%
                        );"></div>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background: #4361ee; border-radius: 3px;"></span> المستوى 1</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background: #3a0ca3; border-radius: 3px;"></span> المستوى 2</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background: #f72585; border-radius: 3px;"></span> المستوى 3</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background: #4cc9f0; border-radius: 3px;"></span> المستوى 4+</div>
                    </div>
                </div>
                
                <div style="background: white; border-radius: 10px; padding: 20px;">
                    <h3>نشاط الأعضاء</h3>
                    <div style="height: 250px; display: flex; flex-direction: column; justify-content: space-around;">
                        <div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>نشط اليوم</span>
                                <span>25%</span>
                            </div>
                            <div style="height: 10px; background: #f0f0f0; border-radius: 5px; overflow: hidden;">
                                <div style="height: 100%; width: 25%; background: var(--success);"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>نشط هذا الأسبوع</span>
                                <span>60%</span>
                            </div>
                            <div style="height: 10px; background: #f0f0f0; border-radius: 5px; overflow: hidden;">
                                <div style="height: 100%; width: 60%; background: var(--primary);"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>نشط هذا الشهر</span>
                                <span>85%</span>
                            </div>
                            <div style="height: 10px; background: #f0f0f0; border-radius: 5px; overflow: hidden;">
                                <div style="height: 100%; width: 85%; background: var(--warning);"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="firebase.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>